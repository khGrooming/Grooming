<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="communityMapper">

	<resultMap type="Board" id="boardResultSet">
		<id property="boardNo" column="BOARD_NO" />
		<result property="memberNo" column="MEMBER_NO" />
		<result property="bCategoryNo" column="B_CATEGORY_NO" />
		<result property="boardTitle" column="BOARD_TITLE" />
		<result property="boardContent" column="BOARD_CONTENT" />
		<result property="boardCreateDate" column="BOARD_CREATE_DATE" />
		<result property="boardModifyDate" column="BOARD_MODIFY_DATE" />
		<result property="boardVcount" column="BOARD_VCOUNT" />
		<result property="boardGcount" column="BOARD_GCOUNT" />
		<result property="boardStatus" column="BOARD_STATUS" />
		<result property="boardReplyStatus" column="BOARD_REPLY_STATUS" />
		<result property="boardSelecStatus" column="BOARD_SELEC_STATUS" />
		<result property="memberNickName" column="MEMBER_NICKNAME" />
	</resultMap>
		
	<select id="selectList" resultMap="boardResultSet">
 		SELECT * FROM BOARD
		JOIN MEMBER USING (MEMBER_NO)
        WHERE B_CATEGORY_NO = 'BC00001'
        ORDER BY BOARD_NO DESC
	</select>
	
	<insert id="noticeInsert" parameterType="Board">
		INSERT INTO BOARD (BOARD_NO, MEMBER_NO, B_CATEGORY_NO, BOARD_TITLE, BOARD_CONTENT,
							BOARD_CREATE_DATE, BOARD_MODIFY_DATE, BOARD_VCOUNT, BOARD_GCOUNT, BOARD_STATUS,
							BOARD_REPLY_STATUS, BOARD_SELEC_STATUS)
		VALUES('B' || LPAD(SEQ_BOARD_NO.NEXTVAL,5,0)
			, #{memberNo}
			, 'BC00001'
			, #{boardTitle}
			, #{boardContent}
			, SYSDATE
			, SYSDATE
			, 0 
			, 0
			, 'Y'
			, 'N'
			, 'N'
		)
	</insert>
	
	<select id="selectOne" parameterType="string" resultMap="boardResultSet">
		SELECT * FROM BOARD
		JOIN MEMBER USING (MEMBER_NO)
		WHERE BOARD_NO=#{boardNo}
	</select>

	<update id="noticeUpdate" parameterType="Board">
		UPDATE BOARD
		SET BOARD_TITLE=#{boardTitle}
			, BOARD_CONTENT=#{boardContent}
			, BOARD_MODIFY_DATE=SYSDATE
		WHERE BOARD_NO=#{boardNo}
	</update>

	<delete id="noticeDelete" parameterType="string">
		DELETE FROM BOARD
		WHERE BOARD_NO=#{boardNo}
	</delete>

	<update id="addViewCount" parameterType="string">
		UPDATE BOARD
		SET BOARD_VCOUNT = BOARD_VCOUNT + 1
		WHERE BOARD_NO=#{boardNo} 
	</update>
	
	<select id="selectListFB" resultMap="boardResultSet">
 		SELECT * FROM BOARD
		JOIN MEMBER USING (MEMBER_NO)
        WHERE B_CATEGORY_NO = 'BC00002'
        ORDER BY BOARD_NO DESC
	</select>
	
	<select id="selectOneFB" parameterType="string" resultMap="boardResultSet">
		SELECT * FROM BOARD
		JOIN MEMBER USING (MEMBER_NO)
		WHERE BOARD_NO=#{boardNo}
	</select>
	

	
</mapper>
